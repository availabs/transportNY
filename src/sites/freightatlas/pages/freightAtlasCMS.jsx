import { useFalcor } from "~/modules/avl-components/src"
import { useAuth } from "~/modules/ams/src";
import { Link } from 'react-router'


import { dmsPageFactory, registerDataType, Selector, registerComponents } from "~/modules/dms/src"
import pageConfig from "~/modules/dms/src/patterns/page/siteConfig"
import { withAuth } from "~/modules/ams/src"

import checkAuth from "~/layout/checkAuth"
import { Logo } from '~/layout/ppdaf-layout'
import AuthMenu from "~/pages/Auth/AuthMenu"

import ComponentRegistry from '~/components'

import { DamaMap } from '~/pages/DataManager'

// import BuildingFootprintsDownload from "./buildings_download"

registerComponents({
  "Map: Dama Map": DamaMap,
})
//registerComponents(ComponentRegistry)
registerDataType("selector", Selector)

//console.log('components', DamaMap)


const theme = {
  navOptions: {
    "sideNav": {
        "size": "none",
        "search": "none",
        "logo": "none",
        "dropdown": "none",
        "fixedMargin": "lg:ml-44",
        "position": "fixed",
        "nav": "none"
    },
    "topNav": {
        "size": "compact",
        "dropdown": "right",
        "search": "none",
        "logo": "left",
        "position": "sticky",
        "nav": "main"
    }
  },
  logo: {
    logoWrapper: '',
    logoAltImg: '',
    imgWrapper: 'h-12 pl-3 pr-2 flex items-center',
    img: `/nys_logo_blue.svg`,
    titleWrapper: '',
    title: '',
    linkPath: '/'
  },
  page: {
    container: 'bg-slate-100',
    wrapper1: 'w-full h-full flex-1 flex flex-col', // first div inside Layout
    wrapper2: 'w-full h-full flex-1 flex flex-row', // inside page header, wraps sidebar
    wrapper3: 'flex flex-1 w-full flex-col border shadow bg-white relative text-md font-light  min-h-[calc(100vh_-_132px)] overflow-hidden', // content wrapepr
    //wrapper3: 'flex flex-1 w-full  flex-col border shadow bg-white relative text-md font-light leading-7 p-4 min-h-[calc(100vh_-_102px)]' , // content wrapepr
    iconWrapper : 'z-20 absolute right-[10px] top-[15px]',
    icon: 'text-slate-400 hover:text-blue-500'
  },
  "sectionGroup": {
        "sideNavContainer1": "w-[302px] hidden xl:block",
        "sideNavContainer2": "w-[302px] sticky top-[120px] hidden xl:block h-[calc(100vh_-_128px)] pr-2",
        "sideNavContainer3": "shadow-md rounded-lg overflow-hidden h-full",
        "default": {
            "wrapper1": "w-full h-full flex-1 flex flex-row pt-2",
            "wrapper2": "flex flex-1 w-full  flex-col  shadow-md bg-white rounded-lg relative text-md font-light leading-7 h-full min-h-[200px]",
            "iconWrapper": "z-[10] w-[30px] h-[30px] absolute right-[30px] top-[5px]",
            "icon": "text-slate-400 hover:text-blue-500",
            viewIcon: 'ViewPage',
            editIcon: 'EditPage'
        },
  },
  topnav: {
      fixed: 'mt-12',
      topnavWrapper: `w-full h-[50px] flex items-center pr-1`,
      topnavContent: `flex items-center w-full h-full bg-slate-100 `,
      topnavMenu: `hidden  lg:flex items-center flex-1  h-full overflow-x-auto overflow-y-hidden scrollbar-sm`,
      menuItemWrapper: 'flex',
      menuIconTop: `text-blue-400 mr-3 text-lg group-hover:text-blue-500`,
      menuIconTopActive : `text-blue-500 mr-3 text-lg group-hover:text-blue-500`,
      menuOpenIcon: `fa-light fa-bars fa-fw`,
      menuCloseIcon: `fa-light fa-xmark fa-fw"`,
      navitemTop: `
          
      w-fit group font-display whitespace-nowrap border-r border-slate-200
      flex font-medium tracking-widest items-center text-[14px] px-4 h-12 text-slate-700 border-slate-100
      hover:bg-white hover:text-blue-500
      focus:outline-n
      w-fit group font-display whitespace-nowrap
      flex font-medium tracking-widest items-center text-[14px] px-4 h-12 text-slate-700 border-slate-100
      hover:bg-white hover:text-blue-500
      focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
      transition cursor-pointerone focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
      transition cursor-pointer
      `,
      navitemTopActive:
        ` 
          w-fit group font-display whitespace-nowrap
          flex font-medium tracking-widest items-center text-[14px] px-4 h-12 text-slate-700 border-slate-100
          hover:bg-white hover:text-blue-500
          focus:outline-n
          w-fit group font-display whitespace-nowrap
          flex font-medium tracking-widest items-center text-[14px] px-4 h-12 text-slate-700 border-slate-100
          hover:bg-white hover:text-blue-500
          focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
          transition cursor-pointerone focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
          transition cursor-pointer
        `,
      topmenuRightNavContainer: "hidden md:flex h-full items-center",
      topnavMobileContainer: "bg-slate-50",
     
      mobileButton:`md:hidden bg-slate-100 inline-flex items-center justify-center pt-[12px] px-2 hover:text-blue-400  text-gray-400 hover:bg-gray-100 `,
      indicatorIcon: 'fal fa-angle-down pl-2 pt-1',
      indicatorIconOpen: 'fal fa-angle-down pl-2 pt-1',
      
      subMenuWrapper: `hidden`, //`absolute bg-white `,
      subMenuParentWrapper: 'hidden', //,`flex flex-row  max-w-[1400px] mx-auto`,
      subMenuWrapperChild: `divide-x overflow-x-auto max-w-[1400px] mx-auto`,
      subMenuWrapperTop: 'hidden',//`absolute top-full left-0 border-y border-gray-200 w-full bg-white normal-case`,
      subMenuWrapperInactiveFlyout: `absolute left-0 right-0  mt-8 normal-case bg-white shadow-lg z-10 p-2`,
      subMenuWrapperInactiveFlyoutBelow: ` absolute ml-40 normal-case bg-white shadow-lg z-10 p-2`,
      subMenuWrapperInactiveFlyoutDirection: 'grid grid-cols-4',
      
  }
}

const Routes = [
  {
    ...dmsPageFactory(
      pageConfig[0]({
        app: "transportny",
        type: "cms-freightatlas",
        useFalcor: useFalcor,
        logo: <Logo />,
        rightMenu: (
          <div className='flex'>
            <Link to='/datasources' className='w-fit group font-display whitespace-nowrap
        flex font-medium tracking-widest items-center text-[14px] px-4 h-12 text-slate-700 border-slate-100
        hover:bg-white hover:text-blue-500
        focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300
        transition cursor-pointer'>Data Manager</Link>
            <AuthMenu />
          </div>
        ),
        baseUrl: "",
        checkAuth,
        themes: { default: theme },
        pgEnv: 'freight_data'
      }),
      withAuth,

    ),
    authLevel: -1,
    name: "CMS",
    sideNav: {
      color: 'white',
      size: 'none'
    },
    topNav: {
      size: "none",
      color: "white"
    }
  }
]


export default Routes
